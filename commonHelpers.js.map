{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import axios from 'axios';\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst searchForm = document.getElementById(\"searchForm\");\nconst galleryImages = document.querySelector(\"ul.gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".load-btn\");\n\nlet perPage = 40;\nlet page = 1;\nlet currentQuery = \"\";\n\nsearchForm.addEventListener(\"submit\", searchFormSubmit);\nloadBtn.addEventListener(\"click\", loadMoreImages);\n\nloader.style.display = \"none\";\nloadBtn.style.display = \"none\";\n\nasync function searchFormSubmit(evt) {\n    evt.preventDefault();\n    galleryImages.innerHTML = \"\";\n    const form = evt.currentTarget;\n    const query = form.elements.searchQuery.value.trim();\n\n    if (query === \"\") {\n        return;\n    }\n\n    page = 1; \n    currentQuery = query;\n    \n    try {\n        await loadMoreImages();\n    } catch (error) {\n        console.error(error);\n        loader.style.display = \"none\";\n        form.reset();\n    }\n}\n\nasync function loadMoreImages() {\n    try {\n        const images = await fetchImages(currentQuery);       \n            renderImages(images);\n            page += 1;\n            if (page > 1 ) {\n                loadBtn.style.display = \"none\";\n            } else {\n                loadBtn.style.display = \"block\";\n            }\n        \n    } catch (error) {\n        console.error(error);\n        loadBtn.style.display = \"none\";\n        showErrorNotification(\"Sorry, an error occurred. Please try again.\");\n    }\n}\n\nasync function fetchImages(currentQuery) {\n    try {\n        const response = await axios.get(`https://pixabay.com/api/?key=41802498-7aef04e1b4b4791f33c618bc1`, {\n            params: {\n                q: currentQuery,\n                image_type: \"photo\",\n                orientation: \"horizontal\",\n                safesearch: true,\n                per_page: perPage,\n                page: page,\n            }\n        });\n        loadBtn.style.display = \"block\";\n            if (!response.data.total) {\n                iziToast.show({\n                    message: '❌Sorry, there are no images matching your search query. Please try again!',\n                    messageColor: '#ffffff',\n                    backgroundColor: '#EF4040',\n                    position: 'topRight',\n                    maxWidth: '420px',\n                    close: false,\n                });\n                \n        galleryImages.innerHTML = \"\";\n    }\n        return response.data.hits;\n\n    } catch (error) {\n        console.error(error);\n        throw error;\n    }\n}\n\nfunction renderImages(images) {\n    const markup = images.map(({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => {\n        return `\n            <li class=\"gallery-item\">\n                <a class=\"link-gallery\" href=\"${largeImageURL}\">\n                    <img class=\"gallery-images\" src=\"${webformatURL}\" alt=\"${tags}\">\n                </a>\n                <div class=\"photo-info\">\n                    <p class=\"info-number\"><strong>Like</strong> ${likes}</p>\n                    <p class=\"info-number\"><strong>Views</strong> ${views}</p>\n                    <p class=\"info-number\"><strong>Comments</strong> ${comments}</p>\n                    <p class=\"info-number\"><strong>Downloads</strong> ${downloads}</p>\n                </div>\n            </li>\n        `;\n    }).join(\"\");\n\n    galleryImages.insertAdjacentHTML(\"beforeend\", markup);\n\n    const lightbox = new SimpleLightbox(document.querySelectorAll('.gallery a'));\n    // const lightbox = new SimpleLightbox('.gallery a');\n    lightbox.refresh();\n}\n\nfunction showErrorNotification(message) {\n    iziToast.show({\n        message: `❌ ${message}`,\n        messageColor: '#ffffff',\n        backgroundColor: '#EF4040',\n        position: 'topRight',\n        maxWidth: '420px',\n        close: false,\n    });\n}\n\n// function showInfoNotification(message) {\n//     iziToast.show({\n//         message: `✅ ${message}`,\n//         messageColor: '#ffffff',\n//         backgroundColor: '#41B883',\n//         position: 'topRight',\n//         maxWidth: '420px',\n//         close: false,\n//     });\n// }\n\n"],"names":["searchForm","galleryImages","loader","loadBtn","perPage","page","currentQuery","searchFormSubmit","loadMoreImages","evt","form","query","error","images","fetchImages","renderImages","showErrorNotification","response","axios","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","message"],"mappings":"owBAOA,MAAMA,EAAa,SAAS,eAAe,YAAY,EACjDC,EAAgB,SAAS,cAAc,YAAY,EACnDC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElD,IAAIC,EAAU,GACVC,EAAO,EACPC,EAAe,GAEnBN,EAAW,iBAAiB,SAAUO,CAAgB,EACtDJ,EAAQ,iBAAiB,QAASK,CAAc,EAEhDN,EAAO,MAAM,QAAU,OACvBC,EAAQ,MAAM,QAAU,OAExB,eAAeI,EAAiBE,EAAK,CACjCA,EAAI,eAAc,EAClBR,EAAc,UAAY,GAC1B,MAAMS,EAAOD,EAAI,cACXE,EAAQD,EAAK,SAAS,YAAY,MAAM,OAE9C,GAAIC,IAAU,GAId,CAAAN,EAAO,EACPC,EAAeK,EAEf,GAAI,CACA,MAAMH,EAAc,CACvB,OAAQI,EAAP,CACE,QAAQ,MAAMA,CAAK,EACnBV,EAAO,MAAM,QAAU,OACvBQ,EAAK,MAAK,CACb,EACL,CAEA,eAAeF,GAAiB,CAC5B,GAAI,CACA,MAAMK,EAAS,MAAMC,EAAYR,CAAY,EACzCS,EAAaF,CAAM,EACnBR,GAAQ,EACJA,EAAO,EACPF,EAAQ,MAAM,QAAU,OAExBA,EAAQ,MAAM,QAAU,OAGnC,OAAQS,EAAP,CACE,QAAQ,MAAMA,CAAK,EACnBT,EAAQ,MAAM,QAAU,OACxBa,EAAsB,6CAA6C,CACtE,CACL,CAEA,eAAeF,EAAYR,EAAc,CACrC,GAAI,CACA,MAAMW,EAAW,MAAMC,EAAM,IAAI,kEAAmE,CAChG,OAAQ,CACJ,EAAGZ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAUF,EACV,KAAMC,CACT,CACb,CAAS,EACD,OAAAF,EAAQ,MAAM,QAAU,QACfc,EAAS,KAAK,QACfE,EAAS,KAAK,CACV,QAAS,4EACT,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,SAAU,QACV,MAAO,EAC3B,CAAiB,EAETlB,EAAc,UAAY,IAEnBgB,EAAS,KAAK,IAExB,OAAQL,EAAP,CACE,cAAQ,MAAMA,CAAK,EACbA,CACT,CACL,CAEA,SAASG,EAAaF,EAAQ,CAC1B,MAAMO,EAASP,EAAO,IAAI,CAAC,CAAE,aAAAQ,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAS,IACtF;AAAA;AAAA,gDAEiCL;AAAA,uDACOD,WAAsBE;AAAA;AAAA;AAAA,mEAGVC;AAAA,oEACCC;AAAA,uEACGC;AAAA,wEACCC;AAAA;AAAA;AAAA,SAInE,EAAE,KAAK,EAAE,EAEV1B,EAAc,mBAAmB,YAAamB,CAAM,EAEnC,IAAIQ,EAAe,SAAS,iBAAiB,YAAY,CAAC,EAElE,QAAO,CACpB,CAEA,SAASZ,EAAsBa,EAAS,CACpCV,EAAS,KAAK,CACV,QAAS,KAAKU,IACd,aAAc,UACd,gBAAiB,UACjB,SAAU,WACV,SAAU,QACV,MAAO,EACf,CAAK,CACL"}